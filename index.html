
<!doctype html>
<html lang="en">
	<head>
		<!-- Meta -->
		<meta charset="utf-8">
		<title>ToiletHero</title>
		<meta name="description" content="ToiletHero - Saving your every toilet experience!">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
		
		<!-- Stylesheets -->
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="http://plugins.adchsm.me/slidebars/scripts/slidebars/0.9/slidebars.min.css">
		<link rel="stylesheet" href="http://plugins.adchsm.me/slidebars/slidebars-theme.css">
		<link rel="stylesheet" href="css/style.css">
		
		<!-- Shims -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
		<![endif]-->
		
		<!-- Web App -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		
		<!-- Favicons -->
		<link rel="icon"
			type="image/png"
			href="images/icons/16.png">
		<link rel="icon"
			type="image/png"
			href="images/icons/32.png"
			sizes="32x32">
		<link rel="icon"
			type="image/png"
			href="images/icons/48.png"
			sizes="48x48">
		<link rel="icon"
			type="image/png"
			href="images/icons/64.png"
			sizes="64x64">
		
		<!-- Apple Touch Icons -->
		<link rel="apple-touch-icon"
			href="images/icons/152.png"
			sizes="120x120">
		<link rel="apple-touch-icon"
			href="images/icons/120.png"
			sizes="152x152">
		<link rel="apple-touch-icon"
			href="images/icons/76.png"
			sizes="76x76">
		<link rel="apple-touch-icon"
			href="images/icons/114.png"
			sizes="114x114">
		<link rel="apple-touch-icon"
			href="images/icons/57.png"
			sizes="57x57">
		<link rel="apple-touch-icon"
			href="images/icons/144.png"
			sizes="144x144">
		<link rel="apple-touch-icon"
			href="images/icons/72.png"
			sizes="72x72">
			
		<!-- Startup Images -->
		<!-- iPhone 5, 5S, 5C -->
		<link href="images/startup/1096.png"
			media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"
			rel="apple-touch-startup-image">
		
		<!-- iPhone 4, 4S -->
		<link href="images/startup/920.png"
			media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)"
			rel="apple-touch-startup-image">
		
		<!-- Kelvin: hacked and removed the rest of the startup images for prototype -->
		
		
		
		
	    
	</head>
	
	<body id="top">
		<!-- Navbar -->
		<nav class="navbar navbar-default navbar-fixed-top sb-slide" role="navigation">
			<!-- Left Control -->
			<div class="navbar-left">
				<div id="icon">
					<div class="sb-toggle-left">			
							<div class="navicon-line"></div>
							<div class="navicon-line"></div>
							<div class="navicon-line"></div>
					</div><!-- /.sb-control-left -->
					
					<a id="btn-back" href="#"><img src="images/back.png" width="20" height="20"></a>
				</div>
			</div>
			
			<div class="container">
			
						<!-- Logo -->
						<div id="logo" class="navbar-left">
							<a id="btn-gohome" href="#"><img src="images/toilethero@2x.png" alt="ToiletHero" width="118" height="40"></a>
						</div><!-- /#logo -->
					
					
					
						<!-- GPS -->
						<div id="gps" class="navbar-right">
							<img src="images/gps.gif" alt="GPS:ON" width="90%" height="90%" >
						</div><!-- /#GPS -->
					
				
			</div>
			
			
		</nav>
		
		
		
		
		
		<!-- Site -->
		<div id="sb-site">
		<!--FACEBOOK LOGIN (SHOULD BE ABOVE SITE SLIDER) -->
		<div id="login">
			<img src="images/startup/1096.png" id="startpage" class="img-responsive" />
			<a href"#"><img id="facebook" src="images/login.png" /></a>
		</div>
		<!--END FACEBOOK LOGIN-->
		
			<div class="container">
				<div class="row">
					<div id="content" class="col-xs-12 col-sm-9">	
		
		
					
<div id="listscreen">
	<div id="contents">
	</div><!--contents-->
</div><!--listscreen-->
				

<div id="startscreen">


	<div class="topstat col-xs-12">
		<div class="level">
		Level <span></span>
		</div>

		<div class="building">
		&nbsp <span></span>
		</div>
	</div>
	
	<br class="clearfix" />&nbsp;
	
	
	
	<div class="mainImage">
		<div class="item">
			<img src="">
		</div><!--item-->
	</div><!--mainImage-->

	<!-- three change from id to class -->
	<div class="three col-xs-12">
		<div id="distance" class="statbox">
			Distance
			<span></span>
			</div>
		<div id="cleanliness" class="statbox">
			Cleanliness
			<span></span>
			</div>
		<div id="queue" class="statbox">
			Occupancy
			<span></span>
		</div>

	</div>
	
	<div id="rating" class="col-xs-12">
		<p>
			<span id="miniicon"></span>
			<button id="viewcomments" type="button" class="btn btn-default">
				<span class="glyphicon glyphicon-eye-open"></span>
				View Comments</button>
			<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#rateModal">
				<span class="glyphicon glyphicon-star"></span>
				Rate Toilet
			</button>
		</p>
	</div>
	
</div>	<!--startscreen-->	

<div id="commentscreen">

	<div class="topstat col-xs-12">
		<div class="level">
		Level <span>4</span>
		</div>

		<div class="building">
			&nbsp<span></span>
		</div>
	</div>
	<p></p>
	
	<ul id="comments">
		<li class="malecomment comment">
			<img class="replaceimg" src="images/user7.jpg" class="img-circle" />
			<span class="replacetxt">
			<em>Muthu S/O Balakrishnan</em>
			"I think this is pretty decent."
						<small>5 mins ago</small>
			</span>
		</li>
		<li class="malecomment comment">
			<img src="images/user1.jpg" class="img-circle" />
			<span>
			<em>John Tan</em>
			"The cubicle on the far right lacks toilet paper!"
						<small>17 mins ago</small>
			</span>
		</li>
		<li class="malecomment comment">
			<img src="images/user2.jpg" class="img-circle" />
			<span>
			<em>Michael Lee</em>
			"My favourite place for taking a dump."
						<small>23 mins ago</small>
			</span>
		</li>
		<!-- female -->
		<li class="femalecomment comment">
			<img class="replaceimg" src="images/user8.jpg" class="img-circle" />
			<span class="replacetxt">
			<em>Jenny Sim</em>
			"I think this is pretty decent."
						<small>5 mins ago</small>
			</span>
		</li>
		<li class="femalecomment comment">
			<img src="images/user9.jpg" class="img-circle" />
			<span>
			<em>Julian Koh</em>
			"The cubicle on the far right lacks toilet paper!"
						<small>17 mins ago</small>
			</span>
		</li>
		<li class="femalecomment comment">
			<img src="images/user10.jpg" class="img-circle" />
			<span>
			<em>Janice Tan</em>
			"My favourite place for taking a dump."
						<small>23 mins ago</small>
			</span>
		</li>
	</ul>
	<div id="friendshere">
		<span class="count">10 friends were here in the last hour!</span>
		<ul>
			<li class="malecomment">
				<img src="images/user3.jpg" class="img-circle" />
				<span>Bob</span>
			</li>
			<li class="malecomment">
				<img src="images/user4.jpg" class="img-circle" />
				<span>Rick</span>
			</li>
			<li class="malecomment">
				<img src="images/user5.jpg" class="img-circle" />
				<span>Andy</span>
			</li>
			<li class="malecomment">
				<img src="images/user6.jpg" class="img-circle" />
				<span>Mike</span>
			</li>
			<li class="femalecomment">
				<img src="images/user11.jpg" class="img-circle" />
				<span>Michelle</span>
			</li>
			<li class="femalecomment">
				<img src="images/user12.jpg" class="img-circle" />
				<span>Mandy</span>
			</li>
			<li class="femalecomment">
				<img src="images/user13.jpg" class="img-circle" />
				<span>Miki</span>
			</li>
			<li class="femalecomment">
				<img src="images/user14.jpg" class="img-circle" />
				<span>Minah</span>
			</li>
		</ul>
	</div>
</div>		<!--commentscreen-->


	
<div id="mapscreen">

<!--upper-->
	<div id="map"></div>
	
	<div class="level-toggle">
		<a id="L1" href="#"><img src="images/map/toggle_L1.png" /></a>
		<a id="B1" href="#"><img src="images/map/toggle_B1.png" /></a>
	</div>
	
<!--
	<span class="mapinfo">
	Singapore Management University<br />
School of Information Systems<br />
Level 2 Female Toilet<br />
(Next to the escalators)
	</span>
-->

	<!--HALF DONE-->
	<div id="viewdirections-dropdown">
		<div id="dir-btn">
			<a href="#" id="directionsOpen">
					<p>Directions / Map</p>
					<!--<button id="btn-viewdirections" type="button" class="btn btn-primary btn-lg btn-block">View Directions</button>-->
					<img src="images/walk.png" />
			</a>
		</div>
		
		<!--lower-->
	
		<div id="directionlist">		
					
					<div class="directionBox">
						<a href="#">
							<img src="images/map/directions/destination-reached.png"/>
						</a>
					</div>

				
		</div><!--directionlist-->
		
	</div> <!--viewdirections-dropdown -->

</div>	<!--mapscreen-->




<!--
<div id="directionscreen">
	<span class="mapinfo">
	Singapore Management University<br />
School of Information Systems<br />
Level 2 Female Toilet<br />
(Next to the escalators)
	</span>
	<ul>
		<li><img src="images/arrow-right.png" /><span>Take the lift<em>from SIS Level 3 to Level B1</em></span></li>
		<li><img src="images/arrow-up.png" /><span>Continue across <em>the Concourse to SOE</em></span></li>
		<li><img src="images/arrow-up.png" /><span>Take the lift <em>from SOE Level B1 to Level 2</em></span></li>
		<li><img src="images/arrow-right.png" /><span>Continue to the side <em>of the escalators</em></span></li>
		<li><span>Arrived at Toilet</span></li>
	</ul>
	<div id="viewindoor">
		<button id="btn-viewindoor" type="button" class="btn btn-primary btn-lg btn-block">View Indoor Maps</button>
	</div>	
</div>

					</div><!-- /#content-->
				
				
				</div><!-- /.row -->
			
			</div><!-- /.container -->
		</div><!-- /#sb-site -->
		
		
		
		<!-- Slidebars -->
<div class="sb-slidebar sb-left sb-width-custom" data-sb-width="220px">
	<nav>
		<ul class="sb-menu">
			<li><img src="images/toilethero-white@2x.png" alt="Slidebars" width="118" height="40"></li>
			<li>					
				<h5>Specify Radius</h5>
				<div id="radius" class="btn-group">
					<button id="100m" type="button" class="btn btn-default">100m</button>
					<button id="200m" type="button" class="btn btn-default">200m</button>
					<button id="300m" type="button" class="btn btn-default">300m</button>
				</div>
			</li>
			<li>
				<h5>Search For</h5>
				<div class="checkbox">
				  <label>
				    <input type="checkbox" value="cleanest" />
				    <span>Cleanest Toilet</span>
				  </label>
				  <label>
				    <input type="checkbox" value="least" />
				    <span>Least Crowded Toilet</span>
				  </label>
				</div>
			</li>
			<li>
				<h5>Toilet Type</h5>
				<div class="checkbox">
				  <label>
				    <input type="checkbox" value="male" />
				    <span>Male</span>
				  </label>
				  <label>
				    <input type="checkbox" value="female" />
				    <span>Female</span>
				  </label>
				  <label>
				    <input type="checkbox" value="disabled" />
				    <span>Wheelchair Friendly</span>
				  </label>
				</div>
			</li>
			<li><small>&copy; 2014 ToiletHero</small></li>
		</ul>
	</nav>
</div><!-- /.sb-left -->

		
		
		</div><!-- sb-site IMPORTANT DIV -->
		
		<!-- Modal -->
<div class="modal fade" id="rateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Is this toilet's crowd...</h4>
      </div>
      <div class="modal-body">
        <button type="button" class="btn btn-success btn-lg btn-block" data-dismiss="modal" data-toggle="modal" data-target="#rateModal2"><span class="glyphicon glyphicon-user"></span> Empty<span>0 to 2 people</span></button>
        <button type="button" class="btn btn-warning btn-lg btn-block" data-dismiss="modal" data-toggle="modal" data-target="#rateModal2"><span class="glyphicon glyphicon-user"></span><span class="glyphicon glyphicon-user"></span> Slightly Crowded<span>3 to 5 people</span></button>
        <button type="button" class="btn btn-danger btn-lg btn-block" data-dismiss="modal" data-toggle="modal" data-target="#rateModal2"><span class="glyphicon glyphicon-user"></span><span class="glyphicon glyphicon-user"></span><span class="glyphicon glyphicon-user"></span> Super Crowded<span>&gt;5 people</span></button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Skip Toilet Rating</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="rateModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Is this toilet cleanliness...</h4>
      </div>
      <div class="modal-body">
        <button type="button" class="btn btn-success btn-lg btn-block" data-dismiss="modal" data-toggle="modal" data-target="#rateModal3"><span class="glyphicon glyphicon-leaf"></span> Fresh<span>Spotless, fragrant</span></button>
        <button type="button" class="btn btn-warning btn-lg btn-block" data-dismiss="modal" data-toggle="modal" data-target="#rateModal3"><span class="glyphicon glyphicon-ok"></span> Fine<span>Reasonable for usage</span></button>
        <button type="button" class="btn btn-danger btn-lg btn-block" data-dismiss="modal" data-toggle="modal" data-target="#rateModal3"><span class="glyphicon glyphicon-trash"></span> Filthy<span>Totally disgusting and revolting</span></button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Skip Toilet Rating</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="rateModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Let us know what you think...</h4>
      </div>
      <div class="modal-body">
        <textarea class="form-control" rows="3" id="tellus" placeholder="Tell us what you think about this toilet..."></textarea>
        <div id="janitoralert" class="checkbox">
			<label>
				<input type="checkbox"> Send an alert to janitor-on-duty to clean toilet
			</label>
		</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary gotocomment" data-dismiss="modal">Submit Comment</button>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
		<!-- jQuery -->
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		
		<!-- Bootstrap -->
		<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
		
		<!-- Slidebars -->
		<script src="http://plugins.adchsm.me/slidebars/scripts/slidebars/0.9/slidebars.min.js"></script>
		<script>
			(function($) {
				$(document).ready(function() {
					// Initiate Slidebars
					$.slidebars();
					
					// Slidebars Submenus
					$('.sb-toggle-submenu').off('click').on('click', function() {
						$submenu = $(this).parent().children('.sb-submenu');
						$(this).add($submenu).toggleClass('sb-submenu-active'); // Toggle active class.
						
						if ($submenu.hasClass('sb-submenu-active')) {
							$submenu.slideDown(200);
						} else {
							$submenu.slideUp(200);
						}
					});
				});
			}) (jQuery);
		</script>
		
		
		
		<!-- Prettify -->
		<script src="http://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
		
		<!-- Smooth Page Scrolling -->
		<!-- disabled by kelvin for testing carousel <script>
			(function($) {
				$(document).ready(function() {
					$('a[href^="#"]').on('touchend click', function(e) {
						e.preventDefault();
						var id = $(this).attr("href");
						var offset = 70;
						var target = $(id).offset().top - offset;
						
						$('html, body').animate({scrollTop:target}, 500);
					});
				});
			}) (jQuery);
		</script> -->
		
		<!-- Form Validation -->
		<script src="http://plugins.adchsm.me/slidebars/scripts/form-validation.js"></script>

		<!-- Kelvin's random stuff --> <!-- displaying statistics -->
		<script>
			(function($) {
				$(document).ready(function() {
					
					// initial data loading
					genList();
					
					$("#sb-site").css( "min-height", "500px" );
					

/*
	CODES FOR LIST VIEW ONLY
 */

 					//FILTERS SELECTION: sent to test.php
					function genList() {
						// force back to default screen
						$("#listscreen").show()
						$("#startscreen").hide();
						$("#commentscreen").hide();
						$("#mapscreen").hide();
						$("#directionscreen").hide();

						//localhost/test.php?distance=300&gender=MF&crowd=1&cleanliness=1
						var url_distance = "";
						if ($("#100m").hasClass("active")) {
							url_distance ="100";
						}
						if ($("#200m").hasClass("active")) {
							url_distance ="200";
						}
						if ($("#300m").hasClass("active")) {
							url_distance ="300";
						}

						var url_gender = "";
						if ($("ul.sb-menu input[type=checkbox][value=male]").prop('checked')) {
							url_gender += "M";
						}
						if ($("ul.sb-menu input[type=checkbox][value=female]").prop('checked')) {
							url_gender += "F";
						}
						if ($("ul.sb-menu input[type=checkbox][value=disabled]").prop('checked')) {
							url_gender += "D";
						}

						var url_crowd = "";
						if ($("ul.sb-menu input[type=checkbox][value=least]").prop('checked')) {
							url_crowd += "1";
						}

						var url_cleanliness = "";
						if ($("ul.sb-menu input[type=checkbox][value=cleanest]").prop('checked')) {
							url_cleanliness += "1";
						}
						
						var url = "test.php?distance=" + url_distance + "&gender=" + url_gender + "&crowd=" + url_crowd + "&cleanliness=" + url_cleanliness;

						//RETRIEVE RESULTS
						$.getJSON( url, function( data ) {
							// Populate carousel
							//$("div.carousel-inner div.item").remove();	// wipe em out yoz
							$("#listscreen a").remove();	//wipe em out yoz
							$("#listscreen br").remove();
							
							var count = 0;							
							$.each(data, function(index, data){
								//alert(data.distance);
								var activeClass = "";
								if (index == 0) {
									activeClass = " active";
								}

								var niceBuilding = "Raffles City Shopping Centre";
								var building = "Raffles City";
								
								 
								var genderImg = "";
								if (data.gender == "M") {
									genderImg = "<span><img src='images/z/male.png'/></span>";
								} else if (data.gender == "F") {
									genderImg = "<span><img src='images/z/female.png'/></span>";
								} else {
									genderImg = "<span><img src='images/z/disabled.png'/></span>";
								}
								
								
							
								
								var cleanlinessImg = "";
								if (data.cleanliness == "1") {
									cleanlinessImg = '<span><img src="images/butterfly-white.png" /><img src="images/butterfly-grey.png" /><img src="images/butterfly-grey.png" /></span>';
								} else if (data.cleanliness == "2") {
									cleanlinessImg = '<span><img src="images/butterfly-white.png" /><img src="images/butterfly-white.png" /><img src="images/butterfly-grey.png" /></span>';
								} else {
									cleanlinessImg = '<span><img src="images/butterfly-white.png" /><img src="images/butterfly-white.png" /><img src="images/butterfly-white.png" /></span>';
								}

								var crowdImg = "";
								if(data.crowd == "1") {
									crowdImg = '<span><img src="images/empty-red.png" /></span>';
								} else if (data.crowd == "2") {
									crowdImg = '<span><img src="images/empty-yellow.png" /></span>';
								} else {
									crowdImg = '<span><img src="images/empty-green.png" /></span>';
								}
								
								
								
								
								$("#listscreen").append('<a href="#"><div class="toiletBox" data-gender="' +data.gender +'" data-building="' + niceBuilding + '" data-level="' + data.level + '" data-distance="' + data.distance + '" data-cleanliness="' + data.cleanliness + '" data-crowd="' + data.crowd + '" data-landmark="' + data.landmark + '" data-url="' + data.url +'" data-map="' +data.map +'" data-numdirection="' +data.numdirection + '" ><div class="topstat col-xs-12"><div class="level">' + genderImg +'</div><div class="building"><span style="font-size:24px">' +building +'</span><span>Level ' +data.level +'</span></div></div><div class="three col-xs-12" style="margin-top:5px; margin-left:0px;"><div id="distance" class="statbox" >Distance <span>' +data.distance +'m</span></div><div id="cleanliness" class="statbox" >Cleanliness' +cleanlinessImg +'</div><div id="queue" class="statbox" >Occupancy' +crowdImg +'</div></div><!--three--><p>' +data.landmark +'</p></div></a></br>');			
								
								count++;
		/*						
			NEW
			
			<a href="#">		
				<div class ="toiletBox" style="padding:10px; background-color: #404040; min-height: 215px">
					
					<div class="topstat col-xs-12">
						<div class="level">'.$genderMsg.'</div>
						
						<div class="building">
						<span style="font-size:24px">'.$building.'</span>
						<span>Level '.$level.'</span>
						</div>
					</div><!--topstat-->
					
					<div id="three" class="col-xs-12" style="margin-top:5px">
						<div id="distance" class="statbox">
							Distance
							<span>'.$distance.'</span>
						</div>
						<div id="cleanliness" class="statbox">
							Cleanliness'.$cleanlinessMsg.'
						</div>
						<div id="queue" class="statbox">
							Crowd'.$crowdMsg.'
						</div>	
					</div><!--three-->
					
						<p>data.landmark</p>
							
				</div><!--toiletBox-->
			</a>
		
		*/	
			
																 
								 
							});	//END: EACH		
							
							//clicking on any toiletBox on the list
							$("#listscreen a").click(function(){
								$("#listscreen a").children(".toiletBox").removeClass("active");	//remove all active classes
								$(this).children(".toiletBox").addClass("active");	//make the specific toiletBox "active"			
								
								fillStartscreen();	//fill startscreen with the correct data.
								
								//show the startscreen
								$("#listscreen").hide()
								$("#startscreen").show();
								$("#commentscreen").hide();
								$("#mapscreen").hide();
								$("#directionscreen").hide();
								
								currentPage = "#startscreen";
								placeCorrectIcon();
							});		//end click on object on the list
												
						});	//END getJSON INVOCATION
					}	//END GET URL FUNCTION (apply filter)
					
					
					
					
					
					
					function fillStartscreen() {
						
						$("#startscreen .topstat .level span").remove();
						$("#startscreen .topstat .level").append("<span>" + $(".toiletBox.active").attr('data-level') + "</span>");			
						
						// fill the following html DOM objects with the data from the "active" item on the carousel
					  	$("#startscreen .three #distance.statbox span").html($(".toiletBox.active").attr('data-distance') + "m");
					  	$("#startscreen .topstat .building span").html($(".toiletBox.active").attr('data-building'));
					  	
					  	
					  	/*
						  	FILL COMMENT SCREEN
					  	*/
					  	
					  	$("#commentscreen .topstat .level span").remove();
						$("#commentscreen .topstat .level").append("<span>" + $(".toiletBox.active").attr('data-level') + "</span>");
						$("#commentscreen .topstat .building span").html($(".toiletBox.active").attr('data-building'));
						$("#commentscreen p").html($(".toiletBox.active").attr('data-landmark'));

					  	// mini icon
					  	$("#miniicon img").remove();
					  	if ($(".toiletBox.active").attr('data-gender') == "M") {
					  		$("#miniicon").append("<img src=\"images/mini-male.png\" />");
					  		$(".malecomment").show();
					  		$(".femalecomment").hide();
					  	} else if ($(".toiletBox.active").attr('data-gender') == "F") {
					  		$("#miniicon").append("<img src=\"images/mini-female.png\" />");
					  		$(".malecomment").hide();
					  		$(".femalecomment").show();
					  	} else {
					  		$("#miniicon").append("<img src=\"images/mini-wc.png\" />");
					  		$(".malecomment").show();
					  		$(".femalecomment").hide();
					  	}
					  	// the rest of icons
					  	$("#startscreen .three #cleanliness span img").remove();
					  	$("#startscreen .three #queue span img").remove();
					  	
					  	if ($(".toiletBox.active").attr('data-cleanliness') == "3") {
					  		$("#startscreen three #cleanliness span").append("<img src=\"images/butterfly-white.png\" />");
					  		$("#startscreen .three #cleanliness span").append("<img src=\"images/butterfly-white.png\" />");
					  		$("#startscreen .three #cleanliness span").append("<img src=\"images/butterfly-white.png\" />");
					  	} else if ($(".toiletBox.active").attr('data-cleanliness') == "2") {
					  		$("#startscreen .three #cleanliness span").append("<img src=\"images/butterfly-white.png\" />");
					  		$("#startscreen .three #cleanliness span").append("<img src=\"images/butterfly-white.png\" />");
					  		$("#startscreen .three #cleanliness span").append("<img src=\"images/butterfly-grey.png\" />");
					  	} else {
					  		$("#startscreen .three #cleanliness span").append("<img src=\"images/butterfly-white.png\" />");
					  		$("#startscreen .three #cleanliness span").append("<img src=\"images/butterfly-grey.png\" />");
					  		$("#startscreen .three #cleanliness span").append("<img src=\"images/butterfly-grey.png\" />");
					  	}

					  	if ($(".toiletBox.active").attr('data-crowd') == "3") {
					  		
					  		$("#startscreen .three #queue span").append("<img src=\"images/empty-green.png\" />");
					  	} else if ($(".toiletBox.active").attr('data-crowd') == "2") {
					  		
					  		$("#startscreen .three #queue span").append("<img src=\"images/empty-yellow.png\" />");
					  	} else {
					  		
					  		$("#startscreen .three #queue span").append("<img src=\"images/empty-red.png\" />");
					  	}
					  	

			  			var niceGender = "";
						if ($(".toiletBox.active").attr('data-gender') == "M") {
							niceGender = "Male";
						} else if ($(".toiletBox.active").attr('data-gender') == "F") {
							niceGender = "Female";
						} else {
							niceGender = "Disabled";
						}

						$(".mapinfo").html("Singapore Management University<br />"+ $(".toiletBox.active").attr('data-building') +"<br />Level " + $(".toiletBox.active").attr('data-level') + " " + niceGender + " Toilet<br />(" + $(".toiletBox.active").attr('data-landmark') + ")");
						
						/*
							EDIT DATA IN MAPSCREEN HTML
						 */
						$("#mapscreen #map").html("<img src=\"images/map/" + $(".toiletBox.active").attr('data-map') +"\" />");
						
						
						

				
						/*
							ADD THE MAIN IMAGE into startscreen
						*/
						//remove current image
						$(".mainImage .item").remove();
						
						$(".mainImage").append("<div class=\"item active\" data-gender=\"" + $(".toiletBox.active").attr('data-gender') + "\" data-building=\"" + $(".toiletBox.active").attr('data-building') + "\" data-level=\"" + $(".toiletBox.active").attr('data-level') + "\" data-distance=\"" + $(".toiletBox.active").attr('data-distance') + "\" data-cleanliness=\"" + $(".toiletBox.active").attr('data-cleanliness') + "\" data-crowd=\"" + $(".toiletBox.active").attr('data-crowd') + "\" data-landmark=\"" + $(".toiletBox.active").attr('data-landmark') +"\" data-map=\"" +$(".toiletBox.active").attr('data-map') + "\"><img src=\"" + "images/toiletpics/"+ $(".toiletBox.active").attr('data-url') + "\" alt=\"\" /><div class=\"mainImage-caption\"><p>" + $(".toiletBox.active").attr('data-landmark') + "</p><br /><button type=\"button\" class=\"tapnav btn btn-info\">Tap to navigate here</button></div></div>");
						
						
						
						
						//EVENT THAT DISPLAYS MAP
						$(".tapnav").click(function(){
							currentPage = "#mapscreen";
							
							//alert("lol");
							$("#listscreen").hide();
							$("#startscreen").hide();
							$("#commentscreen").hide();
							$("#mapscreen").show();
							$("#directionscreen").hide();
							
							placeCorrectIcon();
							
							//google.maps.event.trigger(map, 'resize');	//MUST RESIZE DUE TO JQuery CONFLICT
						});

						
						
						
						/*
							DIRECTIONS LIST VALUES
						 */
						 
						
						var url_map = $(".toiletBox.active").attr("data-map");
						var url_direction = url_map.substr(0, url_map.length - 9);
						var numdirection = $(".toiletBox.active").attr('data-numdirection');
						
						$("#directionlist").children(".directionBox").remove();
										
						for (var i = 1; i <= numdirection; i++){	
							var url_to_append = url_direction +"-" +i +".png";
												
							$("#directionlist").append('<div class="directionBox"><a href="#"><img src="images/map/directions/' + url_to_append + '"/></a></div>');
							
						}	//END FOR LOOP
						 
						$("#directionlist").append('<div class="directionBox"><a href="#"><img src="images/map/directions/destination-reached.png"/></a></div>');
						 
						 
						 //clicking on any toiletBox on the list
						$(".directionBox").click(function(){
							
							$(this).remove();
							
							//repopulate??
						});		//end click on object on the list

						 
						 
					}
					//END:FILL START SCREEN


					
					

/*
	END END END: CODES FOR LIST VIEW ONLY
 */


			
					

					/*
						
						SCREEN SWITCHING SCRIPTS
						
					*/
					var currentPage ="#listscreen";
					placeCorrectIcon();
					
					// hide all by default except login
					$(".navbar").hide();
					$("#login").show();
					$("#listscreen").hide();
					$("#startscreen").hide();
					$("#commentscreen").hide();
					$("#mapscreen").hide();
					$("#directionscreen").hide();
					
					$("#login a").click(function(){
						$(".navbar").show();
						$("#login").hide();
						$("#listscreen").show();
						$("#startscreen").hide();
						$("#commentscreen").hide();
						$("#mapscreen").hide();
						$("#directionscreen").hide();
					});
					
					
					
					//TEST currentPage for need to put back-button
					function placeCorrectIcon() {
						if(currentPage == "#listscreen") {
							
							$("#icon .sb-toggle-left").show();
							$("#icon #btn-back").hide();
							
						} else {
							
							$("#icon .sb-toggle-left").hide();
							$("#icon #btn-back").show();
						}
												
					}
					
					$("#btn-back").click(function(){
						if (currentPage == "#mapscreen") {
							currentPage = "#startscreen";
														
							$("#listscreen").hide();
							$("#startscreen").show();
							$("#commentscreen").hide();
							$("#mapscreen").hide();
							$("#directionscreen").hide();
							
							placeCorrectIcon();
							
						} else if (currentPage == "#commentscreen") {
							currentPage = "#startscreen";
							
							$("#listscreen").hide();
							$("#startscreen").show();
							$("#commentscreen").hide();
							$("#mapscreen").hide();
							$("#directionscreen").hide();
							
							placeCorrectIcon();
						} else if (currentPage == "#startscreen") {
							currentPage = "#listscreen";
							
							$("#listscreen").show();
							$("#startscreen").hide();
							$("#commentscreen").hide();
							$("#mapscreen").hide();
							$("#directionscreen").hide();
							
							placeCorrectIcon();
						}
						
						
							/*
							$("#btn-back").click(function(){
								if(currentPage=="toiletView"){
									document.getElementById("redirectForm").submit();
								}
								else if(currentPage=="comments"){
									currentPage ="toiletView";
									$("#startscreen").show();
									$("#commentscreen").hide();
									$("#mapscreen").hide();
									$("#directionscreen").hide();
								}else if(currentPage=="map"){
									currentPage ="toiletView";
									$("#startscreen").show();
									$("#commentscreen").hide();
									$("#mapscreen").hide();
									$("#directionscreen").hide();
								}else if(currentPage=="direction"){
									currentPage ="map";
									$("#startscreen").hide();
									$("#commentscreen").hide();
									$("#mapscreen").show();
									$("#directionscreen").hide();
								}
							});
							*/
					});

					//THIS IS EXECUTED AFTER user has rated and commented
					$(".gotocomment").click(function(){
						//alert("lol");
						currentPage = "#commentscreen";
						
						$("#listscreen").hide();
						$("#rateModal2").modal('hide');
						$("#startscreen").hide();
						$("#commentscreen").show();
						$("#mapscreen").hide();
						$("#directionscreen").hide();
						if ($("#tellus").val() != "") {
							$(".replacetxt").html("<em>Current User</em>\"" + $("#tellus").val() + "\"<small>Just now</small>");
								$(".replaceimg").attr("src", "images/userdef.jpg");

						}
						
						placeCorrectIcon();
					});

					$("#btn-viewindoor").click(function(){
						currentPage = "#mapscreen";
						
						//alert("lol");
						$("#listscreen").hide();
						$("#startscreen").hide();
						$("#commentscreen").hide();
						$("#mapscreen").show();
						$("#directionscreen").hide();
						
						placeCorrectIcon();
					});

					$("#btn-viewdirections").click(function(){
						currentPage = "#directionscreen";
						
						//alert("lol");
						$("#listscreen").hide();
						$("#startscreen").hide();
						$("#commentscreen").hide();
						$("#mapscreen").hide();
						$("#directionscreen").show();
						
						placeCorrectIcon();
					});
					

					$(".sb-menu img").click(function(){
						currentPage = "#listscreen";
						
						$("#listscreen").show();
						$("#startscreen").hide();
						$("#commentscreen").hide();
						$("#mapscreen").hide();
						$("#directionscreen").hide();
					});

					$("#logo").click(function(){
						currentPage = "#listscreen";
						
						$("#listscreen").show();
						$("#startscreen").hide();
						$("#commentscreen").hide();
						$("#mapscreen").hide();
						$("#directionscreen").hide();
						
						placeCorrectIcon();
					});

					$("#viewcomments").click(function(){
						currentPage="#commentscreen";
					
						$("#listscreen").hide();
						$("#startscreen").hide();
						$("#commentscreen").show();
						$("#mapscreen").hide();
						$("#directionscreen").hide();
						
						placeCorrectIcon();
					});
					


					// janitor alert
					$("#janitoralert").hide();	// default

					$("#rateModal2 .btn-success").click(function(){
						$("#janitoralert").hide();
					});
					$("#rateModal2 .btn-warning").click(function(){
						$("#janitoralert").hide();
					});
					$("#rateModal2 .btn-danger").click(function(){
						$("#janitoralert").show();
					});


					// radio button change listener
					$("ul.sb-menu input[type=checkbox]").change(function(){
						//alert("checkbox changed");
						genList();
					});

					// radius button listener
					$("#radius button").click(function(){
						//alert($(this).attr("id"));
						$("#radius button").removeClass("active");
						$(this).addClass("active");
						genList();
					});
					
					
					/*
						MAP TOGGLING
					 */
					
					//defaults
					$("#L1").show();
					$("#B1").hide();
					
					$("#L1").click(function() {
						$("#L1").hide();
						$("#B1").show();
						
						var map_addr = $(".item.active").attr('data-map');	//SB%20to%20L1%20Aldo%20Toilet%20(L1).png
						map_addr = map_addr.substring(0,map_addr.length - 8) + "(B1).png";	//substring and concat new value
						
						//replace map with B1 map
						$("#mapscreen #map").html("<img src=\"images/map/" + map_addr +"\" />");
					});
					
					$("#B1").click(function() {
						$("#L1").show();
						$("#B1").hide();
						
						var map_addr = $(".item.active").attr('data-map');	//SB%20to%20L1%20Aldo%20Toilet%20(L1).png
						map_addr = map_addr.substring(0,map_addr.length - 8) + "(L1).png";	//substring and concat new value
						
						//replace map with B1 map
						$("#mapscreen #map").html("<img src=\"images/map/" + map_addr +"\" />");
					});
					
					/*
						Directions list toggle HALF DONE
					 */
					 //defaults
					 var dirBtnValue = 0;
					 
					 $("#viewdirections-dropdown #directionsOpen").click(function() {
						 
						 
						 $("#viewdirections-dropdown #directionlist").slideToggle({direction: "up"});
						 
						 /*
						 if(dirBtnValue = 0){
						 	dirBtnValue = 1;
						 	$("#viewdirections-dropdown #directionsOpen p").html("View Map");
						 	
						 } else {
							 dirBtnValue = 0;
							 $("#viewdirections-dropdown #directionsOpen p").html("View Directions");
						 }
						 */
			
						 //$(this).toggleClass('barClose');
						 
					 });
					
					
					
				});	//END DOCUMENT READY
				
			}) (jQuery);
		</script>

		
	</body>
</html>